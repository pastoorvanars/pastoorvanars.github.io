<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Expires" content="0" />
        <link rel="stylesheet" href="styles.css" />
        <title id="content-title">Content Page</title>
        <script src="script.js" defer></script>
        <script>
            function loadWistiaScript() {
                const script = document.createElement("script");
                script.src = "https://fast.wistia.com/player.js";
                script.async = true;

                script.onerror = function () {
                    document.getElementById("error-message").style.display = "block";
                    document.getElementById("wistia-player-div").style.display = "none";
                };

                document.head.appendChild(script);
            }

            // Check if Wistia script can be loaded

            document.addEventListener("DOMContentLoaded", function () {
                const cookieWall = document.getElementById("cookie-wall");
                const acceptButton = document.getElementById("accept-cookies");
                const denyButton = document.getElementById("deny-cookies");

                // Check the user's consent on page load
                const cookieConsent = localStorage.getItem("cookieConsent");

                if (cookieConsent === null) {
                    cookieWall.style.display = "block"; // Show cookie wall if no consent is given
                } else if (cookieConsent === "false") {
                    cookieWall.style.display = "block"; // Show cookie wall if consent is denied
                } else {
                    loadWistiaScript();
                }

                acceptButton.addEventListener("click", function () {
                    localStorage.setItem("cookieConsent", "true");
                    cookieWall.style.display = "none"; // Hide cookie wall
                    loadWistiaScript();
                    // Here you can add any logic for loading cookies if consent is granted
                });

                denyButton.addEventListener("click", function () {
                    localStorage.setItem("cookieConsent", "false");
                    cookieWall.style.display = "none"; // Keep cookie wall visible for reconsideration
                    // You can add logic here for handling cookie denial
                });
            });
        </script>

        <!--<script src="https://fast.wistia.com/player.js" async></script> -->
        <script src="https://fast.wistia.com/embed/rifkn82hwr.js" async type="module"></script>

        <style>
            wistia-player[media-id="rifkn82hwr"]:not(:defined) {
                background: center / contain no-repeat url("https://fast.wistia.com/embed/medias/rifkn82hwr/swatch");
                display: block;
                filter: blur(5px);
                padding-top: 56.25%;
            }
        </style>
    </head>
    <body class="content-page">
        <div class="language-toggle">
            <img src="images/nl-flag.svg" alt="Dutch" id="lang-nl" class="lang-toggle" data-lang="nl" />
            <img src="images/en-flag.svg" alt="English" id="lang-en" class="lang-toggle" data-lang="en" />
        </div>
        <a href="index.html" class="back-arrow" id="back-link">&#8592; Back</a>
        <div class="content">
            <h1 id="content-header">Content Title</h1>
            <p id="content-text">This is the content for the selected item.</p>
            <div id="wistia-player-div" class="wistia-player-container">
                <wistia-player id="video" media-id="rifkn82hwr" seo="false" aspect="1.7777777777777777"></wistia-player>
            </div>
            <div id="error-message" class="review" style="display: none">
                <p id="content-text2">The video could not be played. You can view it directly on the platform:</p>
                <p>
                    <a id="platform-link" href="https://pastoorvanars.wistia.com/medias/rifkn82hwr" target="_blank"
                        >link</a
                    >
                </p>
            </div>
            <p id="content-text3">This is the content 2 for the selected item.</p>
            <div class="small-letters"><p id="content-text4">cookie message</p></div>
        </div>
        <div id="cookie-wall" class="cookie-wall">
            <p>
            Deze pagina gebruikt cookies voor een betere werking. Door op Accepteren te klikken, gaat u akkoord met het gebruik van cookies.<br/><br/>
            </p>
            <button id="accept-cookies">Accepteren</button>
            <button id="deny-cookies">Weigeren</button>
        </div>
    </body>
</html>
